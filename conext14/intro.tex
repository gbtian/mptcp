%!TEX root =mpip.tex
\section{Introduction}
\label{sec:intro}
Multipath has become available in recent years. Also, IETF proposed RFC $6182$ specifically for multipath TCP in $2011$. By introducing multipath between both ends for one connection, not only higher throughput can be achieved, different characters on different paths can be complementary to satisfy different user requirement under volatile Internet congestion situations.

In data center network, almost every two nodes are connected by multiple physical paths. Because of this unique structure, multipath has been deployed for a long time to increase throughput and improve reliability.

Most current devices (Mainly mobile devices) have more than one internet interface ($4$G, WiFi), it is possible to make use of this facility to improve the quality of  Internet transmission. In scenarios that end users want high throughput, like user is watching HD movies, parallel multipath transmission can greatly improve throughput. In scenarios that end users have intermittent internet connection on one interface, multipath connection can provide smooth switching between connections.

Current work on multipath is mainly on TCP. In MPTCP, if the user has more than one internet interface, there will be more than one subflow in one TCP connection while each subflow is an independent TCP connection. In this way, the user does not need to re-establish the connection when switching connection.But on ther other hand, MPTCP also has some problems. MPTCP maintains multiple TCP flows. Normally, the number of connections is all the possible composition of all interfaces between the client and server. If clients and the server both have 2 interfaces, it means that there will be 4 subflows for each connection. This can be of high workload for servers that have large number of parallel clients. Also, in multipath TCP, as designed, there will be two levels of sequence number. There will be a mapping between the overall sequence number and independent sequence number of each subflow. If the difference of delay among subflows is huge, MPTCP has to maintain a large size of buffer to deal with out-of-order problem. Because every subflow is a regular TCP connection, TCP slow-start happens whenever switching happens which will pull down the overall performance of MPTCP. Of the most importance, MPTCP can only be used in TCP connection given that there is still large amount of non-TCP traffic on the Internet although TCP traffic is dominating.

Based on all weaknesses of MPTCP and feasibility study of MPIP, we propose our multipath implementation at network layer. Introducing multipath at network layer has several benefits over transportation layer. The most important advantage is that network layer is much more flexible than transportation layer. MPTCP is only fit for TCP traffic. Also, the complexity of TCP protocol makes the design of multipath over TCP more complex and vulnerable. These built-in characters of MPTCP predesignate that MPTCP is not flexible enough to satisfy various requirement of different applications. As for MPIP, the simplicity of IP protocol makes it much easier to implement. And almost all traffic on the Internet will go through IP protocol, this makes MPIP more omnipotent than MPTCP.  The simplicity and omnipotence give MPIP great flexibility to do customization for different requirement. As will show in later sections, because of heterogeneous characters of different NICs on one device, different configuration can generate totally different user experience. If the system can provide equivalent performance with MPTCP for TCP traffic, then the good flexibility and generalized capability of MPIP definitely provide a much better option for multipath deployment.

By implementing the prototype of MPIP, our contribution is three-fold.
\begin{enumerate}
\item We propose the overall design and architecture of MPIP. By comparing our design with MPTCP, we see that implementing multipath at network layer has much lighter weight and more straightforward than transportation layer.

\item We implement our design in the latest Linux kernel under Ubuntu system. Also, we evaluate the implementation in different Internet environments. We show that our implementation can match MPTCP in TCP protocol, and also, other protocols like UDP can fit perfectly with multipath IP.

\item For investigation purpose, we combine the implementation of MPTCP and MPIP together to prove multipath feature at both layer. It turns out that this combination can provide better and more consistent performance over some Internet conditions.
\end{enumerate}

The rest of the paper is organized as follows. Section \ref{sec:related} describes the related work.
The design of our implementation is introduced in Section \ref{sec:design}. In Section \ref{sec:evaluation}, we report the experimental results for our multipath IP design. We conclude the paper with summary and future work in Section \ref{sec:conclusion}.
